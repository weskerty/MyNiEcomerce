<div style="text-align:center;">


<img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Basket.png" alt="Man Technologist Medium-Dark Skin Tone" width="120px" />


<div class="section">
    <h2> Comestibles</h2>
    <div class="gallery-container">
        <div id="Alimentos-gallery" 
             class="contenedor-imagenes-animado"
             data-json-path="web/Dinamico/data.json">
           
        </div>
        <a href="web/Dinamico/Alimentos/Dulces/es.html" class="view-all-button">Ver Lista Completa</a>
    </div>
</div>







<h2>Agradecimientos</h2>
</br>
<a href="https://www.pexels.com/es-es/@marco-rota-1033995997/collections/">Fondo</a> 路 <a href="https://tetunori.github.io/fluent-emoji-webfont/" target="_blank" onclick="window.open('https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis', '_blank')">Emojis</a> 路 <a href="https://github.com/alexandresanlim/Badges4-README.md-Profile/blob/master/README.md">Badges</a> 路 <a href="https://github.com/markdown-it/markdown-it">MarkdownIt</a> 路 <a href="https://swiperjs.com/swiper-api#navigation">Galerias</a> 路 <a href="https://opendyslexic.org/about">Fuente</a> 































<!-- galer铆as -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.5/swiper-bundle.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.5/swiper-bundle.min.js"></script>

<script>
async function loadGalleryData(jsonPath) {
    try {
        console.log(`Intentando cargar: ${jsonPath}`);
        const response = await fetch(jsonPath);
        console.log(`Response status: ${response.status}`);
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        const data = await response.json();
        console.log('Datos cargados:', data);
        return data.galleries;
    } catch (error) {
        console.error(`Error loading gallery data from ${jsonPath}:`, error);
        return null;
    }
}

function createSwiper(container, images) {
    container.innerHTML = `
        <div class="swiper-wrapper">
            ${images.map(item => `
                <div class="swiper-slide">
                    <a href="${item.link || '#'}">
                        <img src="${item.image}" alt="${item.name || 'Imagen'}" loading="lazy" />
                    </a>
                </div>
            `).join('')}
        </div>
    `;

    return new Swiper(container, {
        slidesPerView: 'auto',
        spaceBetween: 20,
        loop: true,
        centeredSlides: true,
        autoplay: {
            delay: 3000,
            disableOnInteraction: false,
        }
    });
}

function filterGalleryData(galleryData, container) {
    const galleryKey = container.dataset.galleryKey;
    const galleryFilter = container.dataset.galleryFilter;
    const containerId = container.id.replace('-gallery', '');
    
    if (galleryKey && galleryData[galleryKey]) {
        return galleryData[galleryKey].images || [];
    }
    
    if (galleryFilter) {
        const matchingEntries = Object.entries(galleryData).filter(([key, value]) => 
            key.toLowerCase().includes(galleryFilter.toLowerCase())
        );
        
        if (matchingEntries.length > 0) {
            return matchingEntries.flatMap(([key, value]) => value.images || []);
        }
    }
    
    const matchingKey = Object.keys(galleryData).find(key => 
        key.toLowerCase() === containerId.toLowerCase()
    );
    
    if (matchingKey && galleryData[matchingKey]) {
        return galleryData[matchingKey].images || [];
    }
    
    return [];
}

async function initializeUniversalSwiper() {
    if (typeof Swiper === 'undefined') {
        console.log('Swiper no est谩 cargado a煤n');
        return;
    }
    
    const galleryElements = document.querySelectorAll('.contenedor-imagenes-animado[data-json-path]');
    
    for (const container of galleryElements) {
        const jsonPath = container.dataset.jsonPath;
        
        if (!jsonPath) {
            container.innerHTML = '<p>No se especific贸 ruta JSON</p>';
            continue;
        }
        
        const galleryData = await loadGalleryData(jsonPath);
        
        if (!galleryData) {
            container.innerHTML = '<p>Error al cargar datos</p>';
            continue;
        }
        
        const images = filterGalleryData(galleryData, container);
        
        if (images.length > 0) {
            container.classList.add('swiper');
            createSwiper(container, images);
        } else {
            container.innerHTML = '<p>Sin Elementos</p>';
        }
    }
}

function waitForSwiperAndInit() {
    if (typeof Swiper !== 'undefined') {
        initializeUniversalSwiper();
    } else {
        setTimeout(waitForSwiperAndInit, 100);
    }
}

waitForSwiperAndInit();
</script>
